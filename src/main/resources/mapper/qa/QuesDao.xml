<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.yanferr.qa.dao.QuesDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.yanferr.qa.entity.QuesEntity" id="quesMap">
        <result property="quesId" column="ques_id"/>
        <result property="scene" column="scene"/>
        <result property="answerId" column="answer_id"/>
        <result property="source" column="source"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <select id="selectDistinctQuesByQuesId" resultType="com.yanferr.qa.entity.QuesLabelRelationEntity">
        SELECT
            max(label_id) label_id,ques_id
        FROM
            `tb_ques_label_relation`
        group by ques_id
    </select>
    <select id="queryBackOrFront" resultType="com.yanferr.qa.vo.QuesAnswerVo">
        SELECT
        q.ques_id,
        q.ques,
        q.source,
        q.create_time,
        q.scene,
        a.answer_id,
        a.answer
        FROM
        tb_ques q,
        tb_answer a
        WHERE
        q.answer_id = a.answer_id
        ORDER BY
        q.create_time DESC
        LIMIT #{pageIndex},1
    </select>
    <select id="selectQuesWithin" resultType="com.yanferr.qa.entity.QuesEntity">
        SELECT * FROM `tb_ques`
        where datediff(date(now()),date(create_time)) >=0
        and datediff(date(now()),date(create_time)) <= #{p}
    </select>


</mapper>